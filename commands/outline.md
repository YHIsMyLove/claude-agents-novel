---
name: outline
description: 编写和检查大纲，进行一致性分析，检测设定冲突
argument-hint: [章节/大纲文件路径]
---

# 大纲编写与一致性检查

帮助你编写大纲，并自动检查与现有设定的冲突。

## 使用方式

```
/novel-assistant:outline [章节/大纲文件路径]
```

如果不指定路径，将检查当前项目的大纲文件。

---

## 一致性检查

系统会自动分析你的大纲内容，检测以下类型的冲突：

### ⚠️ 角色能力矛盾

检查大纲中角色的行为是否符合其能力设定：

```
⚠️  设定冲突检测报告
─────────────────────────────
📍 冲突 1: 角色能力矛盾
   位置: outline/chapters/ch-015.md:45
   详情: 张三使用了 [火球术]，但其能力列表中无此技能
   影响: 已发布章节
   建议: 修改能力列表 或 改为符合设定的描述
```

### ⚠️ 时间线错误

检查事件日期是否与已有时间线一致：

```
⚠️  设定冲突检测报告
─────────────────────────────
📍 冲突 2: 时间线错误
   位置: timeline/main.md:12
   详情: 事件日期与章纲不一致（相差3天）
   影响: 仅大纲
   建议: 可安全修改
```

### ⚠️ 地点距离/移动时间

检查角色移动时间和距离是否合理。

### ⚠️ 世界观设定冲突

检查大纲中的设定是否与世界观定义冲突。

---

## 工作流程

1. **分析大纲** - 系统读取并分析大纲内容
2. **一致性检查** - 调用相关 skills 检测冲突
3. **冲突报告** - 输出详细的冲突检测报告
4. **修改建议** - 针对每个冲突给出修改建议
5. **循环优化** - 根据建议修改后重新检查，直到满足要求

---

## 检查范围

| 检查类型 | 已发布章节 | 仅大纲 | 草稿 |
|----------|------------|--------|------|
| 角色能力 | 🔴 警告 | 🟡 提示 | 🟢 自由 |
| 时间线 | 🔴 警告 | 🟡 提示 | 🟢 自由 |
| 地距移动 | 🔴 警告 | 🟡 提示 | 🟢 自由 |
| 世界观设定 | 🔴 警告 | 🟡 提示 | 🟢 自由 |

---

## 与其他命令配合

- `/novel-assistant:init` - 项目初始化后使用
- `/novel-assistant:review` - 大纲满意后进行评价
- `/novel-assistant:write` - 检查通过后开始写作
